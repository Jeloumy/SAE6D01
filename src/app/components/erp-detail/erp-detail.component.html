<div class="flex items-center justify-center bg-base-100">
  <div *ngIf="erp" class="container py-4">
    <div class="flex flex-col mx-4">
      <h1 class="text-2xl font-bold capitalize">{{ erp.nom }}</h1>
      <p class="mt-4 capitalize">{{ erp.adresse }}</p>
      <a
        *ngIf="erp.site_internet"
        class="btn-link"
        [href]="erp.site_internet"
        target="_blank"
        rel="noopener noreferrer"
      >
        Se rendre sur le site web
      </a>
    </div>
    <div class="flex items-center justify-center my-8">
      <app-map
        class="flex flex-grow w-8 h-96"
        [results]="{ results: [erp] }"
      ></app-map>
    </div>
    <div class="flex flex-col gap-4 mx-4">
      <h2
        class="mb-4 text-2xl font-bold leading-none tracking-tight text-base-content"
      >
        Informations sur l'accessibilité
      </h2>
      <h3
        class="text-xl font-semibold leading-none tracking-tight text-base-content"
      >
        Dernière mise à jour :
        <mark class="px-2 text-white rounded" [ngClass]="backgroundClass">
          {{ erp.updated_at | date : "dd/MM/yyyy" }}
        </mark>
      </h3>
      <h4 class="text-xl font-semibold text-base-content">Dispositifs :</h4>
      <ng-container *ngFor="let section of getNonNullEntries(accessibility)">
        <!-- Check if section[1] has non-null entries before displaying the label -->
        <ng-container *ngIf="getNonNullEntries(section[1]).length > 0">
          <h5 class="text-lg font-bold capitalize">{{ getLabel(section[0]) }}</h5>
          <ul>
            <ng-container *ngFor="let item of getNonNullEntries(section[1])">
              <li>
                <ng-container *ngIf="item[1] === true; else elseTemplate">
                  <strong>{{ getLabel(item[0]) }}</strong>
                </ng-container>
                <ng-template #elseTemplate>
                  <strong>{{ getLabel(item[0]) }} :</strong><span class="capitalize"> {{ item[1] }}</span>
                </ng-template>
              </li>
            </ng-container>
          </ul>
        </ng-container>
      </ng-container>
    </div>
  </div>
</div>
